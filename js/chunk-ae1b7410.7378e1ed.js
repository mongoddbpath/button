(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ae1b7410"],{"0395":function(t,e,a){},ccfb:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("d2-container",[a("div",[a("el-dialog",{attrs:{title:t.dialogtitle,visible:t.dialogFormVisible2,"append-to-body":!0},on:{"update:visible":function(e){t.dialogFormVisible2=e}}},[a("el-form",{ref:"rulesForm",staticClass:"demo-rulesForm",attrs:{model:t.rulesForm,rules:t.rules,"status-icon":"","label-width":"100px"}},[a("el-form-item",{attrs:{label:"充值渠道"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:t.rulesForm.qd,callback:function(e){t.$set(t.rulesForm,"qd",e)},expression:"rulesForm.qd"}},t._l(t.status1ok,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"金额",prop:"rmb"}},[a("el-input",{model:{value:t.rulesForm.rmb,callback:function(e){t.$set(t.rulesForm,"rmb",t._n(e))},expression:"rulesForm.rmb"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入备注"},model:{value:t.rulesForm.note,callback:function(e){t.$set(t.rulesForm,"note",e)},expression:"rulesForm.note"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible2=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("充值")])],1)],1),a("el-dialog",{attrs:{title:t.dialogtitle2,visible:t.dialogFormVisible2j,"append-to-body":!0},on:{"update:visible":function(e){t.dialogFormVisible2j=e}}},[a("el-form",{ref:"rulesFormj",staticClass:"demo-rulesForm",attrs:{model:t.rulesFormj,rules:t.rules2,"status-icon":"","label-width":"100px"}},[a("el-form-item",{attrs:{label:"扣减方式"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:t.rulesFormj.type,callback:function(e){t.$set(t.rulesFormj,"type",e)},expression:"rulesFormj.type"}},t._l(t.status1j,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"扣减渠道"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:t.rulesFormj.qd,callback:function(e){t.$set(t.rulesFormj,"qd",e)},expression:"rulesFormj.qd"}},t._l(t.status1,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"扣减账号",prop:"accountabout"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:""},model:{value:t.rulesFormj.accountabout,callback:function(e){t.$set(t.rulesFormj,"accountabout",e)},expression:"rulesFormj.accountabout"}},t._l(t.status2j,(function(t,e){return a("el-option",{key:e,attrs:{label:t.username,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"金额",prop:"rmb"}},[a("el-input",{model:{value:t.rulesFormj.rmb,callback:function(e){t.$set(t.rulesFormj,"rmb",t._n(e))},expression:"rulesFormj.rmb"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入备注"},model:{value:t.rulesFormj.note,callback:function(e){t.$set(t.rulesFormj,"note",e)},expression:"rulesFormj.note"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible2j=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm2}},[t._v("手动扣减")])],1)],1)],1),a("el-card",{staticClass:"m-box-card",staticStyle:{padding:"0"},attrs:{shadow:"hover"}},[a("el-row",[a("el-col",{staticStyle:{width:"20%"}},[a("div",{staticClass:"inputok"},[a("div",{staticClass:"input2"},[t._v("公司名：")]),a("el-input",{staticClass:"input3",model:{value:t.formdata.company,callback:function(e){t.$set(t.formdata,"company",e)},expression:"formdata.company"}})],1)]),a("el-col",{staticStyle:{width:"20%"}},[a("div",{staticClass:"inputok"},[a("div",{staticClass:"input2"},[t._v("账号：")]),a("el-input",{staticClass:"input3",model:{value:t.formdata.account,callback:function(e){t.$set(t.formdata,"account",e)},expression:"formdata.account"}})],1)]),a("el-col",{staticStyle:{width:"20%"}},[a("div",{staticClass:"inputok"},[a("div",{staticClass:"input2"},[t._v("关联账号：")]),a("el-input",{staticClass:"input3",model:{value:t.formdata.accountabout,callback:function(e){t.$set(t.formdata,"accountabout",e)},expression:"formdata.accountabout"}})],1)]),a("el-col",{staticStyle:{width:"20%"}},[a("div",{staticClass:"inputok"},[a("div",{staticClass:"input2"},[t._v("收支类型：")]),a("el-select",{staticClass:"input3",attrs:{placeholder:"请选择"},model:{value:t.formdata.type,callback:function(e){t.$set(t.formdata,"type",e)},expression:"formdata.type"}},t._l(t.formok.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),a("el-col",{staticStyle:{width:"20%"}},[a("div",{staticClass:"inputok"},[a("div",{staticClass:"input2"},[t._v("渠道：")]),a("el-select",{staticClass:"input3",attrs:{placeholder:"请选择"},model:{value:t.formdata.qd,callback:function(e){t.$set(t.formdata,"qd",e)},expression:"formdata.qd"}},t._l(t.formok.typeoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)])],1),a("el-row",{staticStyle:{"margin-top":"12px"}},[a("el-col",{staticClass:"time"},[a("div",{staticClass:"inputok"},[a("div",{staticClass:"input2 input2j"},[t._v("交易时间：")]),a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"","end-placeholder":"","picker-options":t.pickerOptions},model:{value:t.formdata.time,callback:function(e){t.$set(t.formdata,"time",e)},expression:"formdata.time"}})],1)]),a("el-col",{staticClass:"company"},[a("div",{staticClass:"inputok"},[a("div",{staticClass:"input2"},[t._v("单号：")]),a("el-input",{staticClass:"input3",model:{value:t.formdata.ordernum,callback:function(e){t.$set(t.formdata,"ordernum",e)},expression:"formdata.ordernum"}})],1)]),a("el-col",{staticClass:"searchok"},[a("div",{staticClass:"search"},[t.checkw2?a("el-tag",{staticClass:"tagok",attrs:{effect:"plain",type:"success"}},[t._v("交易数："+t._s(t.pagination.total))]):t._e(),a("el-tag",{staticClass:"tagok",staticStyle:{"min-width":"168px"},attrs:{effect:"plain",type:"danger"}},[t._v("余额："+t._s(t.balance))]),a("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(e){t.dialogFormVisible2=!0}}},[t._v("在线充值")]),this.$util.checkjur2(["null",0,2])?a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.dialogFormVisible2j=!0}}},[t._v("手动扣减")]):t._e(),a("el-button",{attrs:{type:"primary"},on:{click:t.searchok}},[t._v("查询")]),a("el-button",{on:{click:t.emptysearch}},[t._v("重置")])],1)])],1)],1),a("el-row",{staticStyle:{"margin-top":"12px"}},[a("el-col",{attrs:{span:24}},[a("el-tag",{staticClass:"tag1"},[a("i",{staticClass:"el-icon-warning i1"}),a("div",{staticClass:"el1"},[t._v("已选择")]),a("div",{attrs:{id:"getnumok"}},[t._v("0")]),a("div",{staticClass:"el1"},[t._v("项")]),a("div",{staticClass:"el1 el2",on:{click:t.nullall}},[t._v("删除")]),t.checkw?a("span",{staticClass:"el1",staticStyle:{float:"right"}},[t._v("交易数："+t._s(t.pagination.total))]):t._e(),a("span",{staticClass:"el1 refresh2",staticStyle:{float:"right"},on:{click:t.throttledMethod}},[t._v("刷新")])])],1)],1),a("d2-crud",{ref:"d2Crud",attrs:{loading:t.loading,options:t.options,columns:t.columns,pagination:t.pagination,data:t.data.filter((function(e){return!t.search||e.name.toLowerCase().includes(t.search.toLowerCase())||e.domain.toLowerCase().includes(t.search.toLowerCase())||e.styleId.toLowerCase().includes(t.search.toLowerCase())})),"edit-title":"","form-options":t.formOptions,"selection-row":""},on:{"selection-change":t.handleSelectionChange,"row-edit":t.handleRowEdit,"dialog-cancel":t.handleDialogCancel,"row-remove":t.handleRowRemove,"pagination-current-change":t.paginationCurrentChange}})],1)},n=[],l=(a("99af"),a("4de4"),a("b0c0"),a("b64b"),a("e25e"),a("159b"),a("25e7")),i=a("1437"),s=a("dbd1"),r=a("50f5"),c=a("a73f"),u=a("fcf5"),m=a("3f6ac"),d=a("c790"),p=a("d676"),f=a("861c"),b=a("1c52"),h=a("60bb"),g=a.n(h),v={name:"webcontrol",data:function(){return{balance:0,value2:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},rules:{rmb:[{required:!0,type:"number",min:1,message:"必须为数字值",trigger:"blur"}]},dialogFormVisible2:!1,status1:[{name:"手动",id:1},{name:"支付宝",id:2},{name:"微信",id:3},{name:"余额",id:4}],status1ok:[{name:"手动",id:1},{name:"支付宝",id:2},{name:"微信",id:3}],rulesForm:{type:"",qd:"",rmb:"",note:""},firstm:"",dialogFormVisible2j:!1,status1j:[{name:"充值",id:1},{name:"支出",id:2}],status2j:[],rules2:{rmb:[{required:!0,type:"number",min:1,message:"必须为数字值",trigger:"blur"}],accountabout:[{required:!0,message:"必选"}]},rulesFormj:{accountabout:"",type:"",qd:"",rmb:"",note:""},formdata:{ordernum:"",type:"",account:"",accountabout:"",qd:"",time:"",company:"",note:""},formok:{statusoptions:[{value:"充值",label:"充值"},{value:"支出",label:"支出"}],typeoptions:[{value:"手动",label:"手动"},{value:"余额",label:"余额"},{value:"支付宝",label:"支付宝"},{value:"微信",label:"微信"}]},selection:"",options:{maxHeight:"568"},permission:["admin"],loading:!0,search:"",pagination:{background:!0,currentPage:parseInt(localStorage.getItem("rechargeczcurrentPage"))||1,pageSize:15,total:12},columns:[{title:"渠道",component:{name:r["a"],props:{myProps:""}},key:"qd",width:"100",filters:[{text:"手动",value:1},{text:"支付宝",value:2},{text:"微信",value:3},{text:"余额",value:4}],filterMethod:function(t,e){return e.qd===t},filterPlacement:"bottom-end"},{title:"金额",width:100,key:"rmb",sortable:!0},{title:"余额",width:100,key:"balance",sortable:!0},{title:"单号",key:"ordernum",width:168},{title:"审核状态",key:"status",width:100,component:{name:l["a"],props:{myProps:""}},filters:[{text:"待审核",value:1},{text:"已审核",value:2}],filterMethod:function(t,e){return e.status===t},filterPlacement:"bottom-end"},{title:"收支类型",component:{name:c["a"],props:{myProps:""}},key:"type",width:168,filters:[{text:"充值",value:1},{text:"支出",value:2}],filterMethod:function(t,e){return e.type===t},filterPlacement:"bottom-end"},{title:"操作账号",key:"accountName"},{title:"流水账号",key:"accountaboutName",width:168},{title:"操作",key:"lang",fixed:"right",component:{name:i["a"],props:{myProps:""}}},{title:"",key:"note",fixed:"right",component:{name:u["a"],props:{myProps:""}}},{title:"",key:"url",fixed:"right",component:{name:s["a"],props:{myProps:""}}},{title:"公司名",key:"company",width:168},{title:"时间",key:"time",width:200}],data:[],formOptions:{labelWidth:"86px",labelPosition:"left",saveLoading:!1}}},mounted:function(){var t=this;Object(d["a"])().then((function(e){t.status2j=e.data})).catch((function(t){console.log("err",t)}));var e=parseInt(localStorage.getItem("rechargeczcurrentPage"))||1;this.paginationCurrentChange(e),this.loading=!1,this.fetchData()},computed:{dialogtitle2:function(){return"手动扣减【余额：".concat(this.balance,"】")},dialogtitle:function(){return"在线充值【余额：".concat(this.balance,"】")},checkw:function(){return document.body.clientWidth<1600},checkw2:function(){return document.body.clientWidth>1600}},methods:{throttledMethod:g.a.debounce((function(){var t=this;t.fetchData()}),1200),getCurrentTime:function(){var t=(new Date).getFullYear(),e=(new Date).getMonth()+1,a=(new Date).getDate(),o=(new Date).getHours(),n=(new Date).getMinutes()<10?"0"+(new Date).getMinutes():(new Date).getMinutes(),l=(new Date).getSeconds()<10?"0"+(new Date).getSeconds():(new Date).getSeconds();return t+"-"+e+"-"+a+" "+o+":"+n+":"+l},submitForm:function(){var t=this;this.$refs.rulesForm.validate((function(e){if(e){var a=t.$createElement;t.rulesForm.qdtype=t.status1.filter((function(e){return e.id===t.rulesForm.qd}))[0].name;var o=t.rulesForm,n=o.rmb,l=o.qdtype,i=o.note,s=["充值明细确认：","金额：".concat(n),"渠道：".concat(l),"备注：".concat(i)],r=[];for(var c in s)r.push(a("p",null,s[c]));var u=a("div",null,r),m="在线充值取消";t.$confirm(u,"确定参数",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then((function(){Object(b["a"])(t.rulesForm).then((function(e){0===e.code?(t.$notify({title:"充值",type:"success",duration:7e3,message:a("b",{style:"color: teal"},e.msg)}),t.balance=t.balance+t.rulesForm.rmb,t.fetchData()):t.$notify({title:e.msg,type:"danger",duration:7e3})})).catch((function(t){console.log("err",t)})),t.dialogFormVisible2=!1})).catch((function(){t.$notify({title:"充值",type:"info",message:a("b",{style:"color: teal"},m)})}))}}))},submitForm2:function(){var t=this;this.$refs.rulesFormj.validate((function(e){if(e){var a=t.$createElement;t.rulesFormj.accountaboutname=t.status2j.filter((function(e){return e.id===t.rulesFormj.accountabout}))[0].username,t.rulesFormj.qdtype=t.status1.filter((function(e){return e.id===t.rulesFormj.qd}))[0].name,t.rulesFormj.typename=t.status1j.filter((function(e){return e.id===t.rulesFormj.type}))[0].name;var o=t.rulesFormj,n=o.accountaboutname,l=o.typename,i=o.rmb,s=o.qdtype,r=o.note;t.firstm="充值"===l?"你正在给【".concat(n,"】充值").concat(i,"元,你的余额减少").concat(i,"元"):"你正在给【".concat(n,"】扣减").concat(i,"元,你的余额增加").concat(i,"元");var c=["充值账户：".concat(n),"扣减方式：".concat(l),"金额：".concat(i),"渠道：".concat(s),"备注：".concat(r)],u=[];for(var m in c)u.push(a("p",null,c[m]));var d=a("div",null,u);t.rulesFormj.rmb>t.balance?t.$notify({title:"余额不足",type:"error",duration:7e3,message:"你的余额不足以为代理充值"}):t.$confirm(d,t.firstm,{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then((function(){1===t.rulesFormj.type?Object(p["a"])(t.rulesFormj).then((function(e){0===e.code?(t.$notify({title:e.msg,type:"success",duration:7e3}),t.balance=t.balance-t.rulesFormj.rmb,t.fetchData()):t.$notify({title:e.msg,type:"danger",duration:7e3})})).catch((function(t){console.log("err",t)})):Object(f["a"])(t.rulesFormj).then((function(e){0===e.code?(t.$notify({title:e.msg,type:"success",duration:7e3}),t.balance=t.balance+t.rulesFormj.rmb,t.fetchData()):t.$notify({title:e.msg,type:"danger",duration:7e3})})).catch((function(t){console.log("err",t)})),t.dialogFormVisible2j=!1})).catch((function(){t.$notify({title:"取消",type:"info"})}))}}))},searchok:function(){console.dir(this.formdata)},fetchData:function(){var t=this;this.loading=!0,Object(m["a"])({page:this.pagination.currentPage,type:1}).then((function(e){t.data=e.list.data,t.pagination.total=e.list.total,t.balance=e.sumamount,t.loading=!1})).catch((function(e){console.log("err",e),t.loading=!1,t.$notify({message:"获取数据失败"})}))},handleRowEdit:function(t,e){var a=this,o=(t.index,t.row);this.formOptions.saveLoading=!0,setTimeout((function(){var t="你确定要修改【".concat(o.url,"】网站吗"),n="【".concat(o.url,"】网站修改成功");a.$confirm(t,"你正在修改网站",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.$alert(n,"网站修改成功",{dangerouslyUseHTMLString:!0,type:"success"}).catch(),e()})).catch((function(){a.$message({type:"success",message:"网站修改已取消"})})),a.formOptions.saveLoading=!1}),300)},handleDialogCancel:function(t){t()},handleRowRemove:function(t,e){var a=this,o=(t.index,t.row);setTimeout((function(){var t=a.$createElement,n="该网站是否已经停止维护？这个操作后【".concat(o.url,"】\n        该网站记录将会从数据库中删除，网站服务也会停止，这是个危险的操作，你确定要这么做吗？"),l="【".concat(o.url,"】网站已经被删除"),i="【".concat(o.url,"】网站删除取消");a.$confirm(n,"删除【".concat(o.url,"】网站"),{confirmButtonText:"确定删除",cancelButtonText:"取消删除",confirmButtonClass:"confirmType",type:"success"}).then((function(){a.$notify({title:"删除成功",type:"success",duration:0,message:t("b",{style:"color: teal"},l)}),e()})).catch((function(){a.$notify({title:"删除取消",type:"info",message:t("b",{style:"color: teal"},i)})}))}),300)},handleDataChange:function(t){},paginationCurrentChange:function(t){this.pagination.currentPage=t,localStorage.setItem("rechargeczcurrentPage",t),this.fetchData()},gotowebs:function(){},gotosearch:function(){},emptysearch:function(){var t=this;Object.keys(this.formdata).forEach((function(e){t.formdata[e]=""}))},handleSelectionChange:function(t){void 0!==t.length&&(document.getElementById("getnumok").innerHTML=t.length,this.selection=t)},nullall:function(){var t=this.selection.length,e=this.selection;if(0===t);else{for(var a="你正在删除".concat(t,"个订单："),o=[],n=0;n<t;n++)o.push(e[n].ordernum);console.dir(o);var l=[],i=this.$createElement;for(var s in o)l.push(i("p",null,o[s]));this.$confirm(a,{title:a,message:i("div",null,l),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){})).catch((function(){}))}}}},y=v,k=(a("d596"),a("0c7c")),w=Object(k["a"])(y,o,n,!1,null,"cdf41ff2",null);e["default"]=w.exports},d596:function(t,e,a){"use strict";var o=a("0395"),n=a.n(o);n.a}}]);
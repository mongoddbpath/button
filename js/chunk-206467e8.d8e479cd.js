(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-206467e8"],{"09db":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var s=r("9bd2");function a(e){return Object(s["a"])({url:"/admin/userAddSite",method:"post",data:e})}},"4f2b":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("d2-container",{attrs:{type:"card"}},[r("el-row",{staticClass:"formv"},[r("el-col",{attrs:{span:e.spanok,offset:e.offsetok}},[r("el-form",{ref:"rulesForm",attrs:{model:e.rulesForm,rules:e.rules}},[e.checkid?r("el-form-item",{attrs:{prop:"group"}},[r("div",{staticClass:"typename required"},[e._v("身份：")]),r("el-radio-group",{model:{value:e.rulesForm.group,callback:function(t){e.$set(e.rulesForm,"group",t)},expression:"rulesForm.group"}},[r("el-radio",{attrs:{label:1}},[e._v("客户")]),r("el-radio",{attrs:{label:3}},[e._v("客服")]),r("el-radio",{attrs:{label:6}},[e._v("业务员")])],1)],1):e._e(),e.checkid?r("el-form-item",[r("div",{staticClass:"typename required"},[e._v("网站授权：")]),r("el-radio-group",{model:{value:e.au,callback:function(t){e.au=t},expression:"au"}},[r("el-radio",{attrs:{label:!1}},[e._v("否")]),r("el-radio",{attrs:{label:!0}},[e._v("是")])],1)],1):e._e(),e.au?r("el-form-item",{attrs:{prop:"checkok"}},[r("div",{staticClass:"typename required"},[e._v("网站选择：")]),r("el-select",{attrs:{filterable:""},model:{value:e.rulesForm.siteid,callback:function(t){e.$set(e.rulesForm,"siteid",t)},expression:"rulesForm.siteid"}},e._l(e.sitearr,(function(e,t){return r("el-option",{key:t,attrs:{label:e.hxn,value:e.id}})})),1)],1):e._e(),r("el-form-item",{attrs:{prop:"username",required:""}},[r("div",{staticClass:"typename required"},[e._v("账户名：")]),r("el-input",{model:{value:e.rulesForm.username,callback:function(t){e.$set(e.rulesForm,"username",t)},expression:"rulesForm.username"}})],1),r("el-form-item",{attrs:{prop:"realName",required:""}},[r("div",{staticClass:"typename required"},[e._v("真实姓名：")]),r("el-input",{model:{value:e.rulesForm.realName,callback:function(t){e.$set(e.rulesForm,"realName",t)},expression:"rulesForm.realName"}})],1),r("el-form-item",{attrs:{prop:"tel",required:""}},[r("div",{staticClass:"typename required"},[e._v("手机号：")]),r("el-input",{model:{value:e.rulesForm.tel,callback:function(t){e.$set(e.rulesForm,"tel",t)},expression:"rulesForm.tel"}})],1),r("el-form-item",{attrs:{prop:"company",required:""}},[r("div",{staticClass:"typename required"},[e._v("公司名：")]),r("el-input",{model:{value:e.rulesForm.company,callback:function(t){e.$set(e.rulesForm,"company",t)},expression:"rulesForm.company"}})],1),r("el-form-item",{attrs:{prop:"password",required:""}},[r("div",{staticClass:"typename required"},[e._v("密码：")]),r("el-input",{attrs:{"show-password":""},model:{value:e.rulesForm.password,callback:function(t){e.$set(e.rulesForm,"password",t)},expression:"rulesForm.password"}})],1),r("el-form-item",{attrs:{prop:"cpassword",required:""}},[r("div",{staticClass:"typename required"},[e._v("密码确认：")]),r("el-input",{attrs:{"show-password":""},model:{value:e.rulesForm.cpassword,callback:function(t){e.$set(e.rulesForm,"cpassword",t)},expression:"rulesForm.cpassword"}})],1),r("el-form-item",[r("div",{staticClass:"buttonok2"},[r("el-button",{staticClass:"buttonok",attrs:{type:"primary"},on:{click:e.next1}},[e._v("确定")]),r("el-button",{staticClass:"buttonok",staticStyle:{"margin-right":"12px"},on:{click:e.reset}},[e._v("重置")])],1)])],1)],1)],1)],1)},a=[],o=(r("99af"),r("4de4"),r("b0c0"),r("b64b"),r("e25e"),r("159b"),r("2909")),i=r("e0a5"),n=r("9f42"),u=r("09db"),c=r("c276"),l={data:function(){var e=this,t=function(t,r,s){e.rulesForm.password!==e.rulesForm.cpassword?s(new Error("两个密码不一致，请修改")):s()},r=function(t,r,s){e.au&&""===e.rulesForm.siteid?s(new Error("授权请选择网站")):(e.au||e.rulesForm.siteid,s())};return{checkname:"",au:!1,sitearra:"",sitearr:[],checkid:2===parseInt(this.$util.cookies.get("uid")),active:0,userid:c["a"].cookies.get("uuid"),rules:{group:[{required:!0,message:"必选"}],username:[{required:!0,message:"必填"},{min:3,max:28,message:"长度至少为3个字符",trigger:"blur"}],realName:[{required:!0,message:"必填"}],tel:[{required:!0,message:"请输入手机号"},{pattern:/^1[3|5|7|8|9]\d{9}$/,message:"请输入正确的号码格式",trigger:"blur"}],company:[{required:!0,message:"必填"}],password:[{required:!0,message:"必填"},{min:8,max:28,message:"长度至少为8个字符",trigger:"blur"}],cpassword:[{required:!0,message:"必填"},{min:8,max:28,message:"长度至少为8个字符",trigger:"blur"},{validator:t,trigger:"blur"}],checkok:[{validator:r,trigger:"blur"}]},rulesForm:{group:"",origincheckok:"",username:"",realName:"",tel:"",password:"",cpassword:"",siteid:""},pickerOptions1:{disabledDate:function(t){return t.getTime()>e.startTime||t.getTime()<Date.now()}}}},watch:{au:function(){this.au||(this.rulesForm.siteid="")}},computed:{textok:function(){return 1===this.rulesForm.group?"同时已经将".concat(this.checkname,"【所属授权】给").concat(this.rulesForm.realName):"同时已经将".concat(this.checkname,"授权给").concat(this.rulesForm.realName)},confirmtextok:function(){return this.au&&1===this.rulesForm.group?"添加用户同时【专属授权】网站":this.au?"添加用户同时授权网站":"请确认用户参数"},groupname:function(){switch(parseInt(this.rulesForm.group)){case 1:return"客户";case 3:return"客服";case 6:return"业务员";default:return"未添加"}},spanok:function(){return document.body.clientWidth>1500?8:10},offsetok:function(){return document.body.clientWidth>1500?8:7}},created:function(){this.$util.authen(["null",0,2])},mounted:function(){var e=this;Object(n["a"])().then((function(t){for(var r=t.data,s=0;s<r.length;s++)null===r[s].company?(e.sitearr[s]={},e.sitearr[s].name=r[s].url,e.sitearr[s].hxn=r[s].url,e.sitearr[s].id=r[s].id):(e.sitearr[s]={},e.sitearr[s].name=r[s].url,e.sitearr[s].hxn="".concat(r[s].url,"【").concat(r[s].company,"】"),e.sitearr[s].id=r[s].id)})).catch((function(t){console.log("err",t),e.loading=!1,e.$notify({message:"获取数据失败"})}))},methods:{next1:function(){var e=this;this.$refs.rulesForm.validate((function(t){t&&(e.au&&1===e.rulesForm.group?e.rulesForm.origincheckok=1:e.rulesForm.origincheckok="",e.submitForm())}))},submitForm:function(){var e=this;this.au?this.checkname=this.sitearr.filter((function(t){return t.id===e.rulesForm.siteid}))[0].hxn:this.rulesForm.siteid="";var t=this.$createElement,r=this.rulesForm,s=r.username,a=r.tel,n=r.company,c=r.password,l=r.realName,m=["身份：".concat(this.groupname),"公司名：".concat(n),"账户名：".concat(s),"真实姓名：".concat(l),"手机号：".concat(a),"密码：".concat(c)];this.au&&(m=["授权的网站：".concat(this.checkname)].concat(Object(o["a"])(m)));var d=[];for(var p in m)d.push(t("p",null,m[p]));var f=t("div",null,d),h="".concat(this.rulesForm.username,"添加失败"),v="用户".concat(this.rulesForm.username,"添加取消"),b="用户".concat(this.rulesForm.username,"添加成功");this.$confirm(f,this.confirmtextok,{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then((function(){var r=e;""!==e.rulesForm.siteid&&e.au?Object(i["a"])(e.rulesForm).then((function(s){if(e.$notify({title:"用户添加成功",type:"success",duration:7e3,message:t("b",{style:"color: teal"},b)}),parseInt(s)>1){var a=r.rulesForm;a.userid=s,Object(u["a"])(r.rulesForm).then((function(e){r.$notify({title:"授权成功",type:"success",duration:0,message:t("b",{style:"color: teal"},r.textok)})})).catch((function(){e.$notify({title:"授权失败",type:"error"})}))}})).catch((function(){e.$notify({title:"用户添加失败",type:"error",message:t("b",{style:"color: teal"},h)})})):Object(i["a"])(e.rulesForm).then((function(){e.$notify({title:"用户添加成功",type:"success",duration:7e3,message:t("b",{style:"color: teal"},b)})})).catch((function(){e.$notify({title:"用户添加失败",type:"error",message:t("b",{style:"color: teal"},h)})}))})).catch((function(){e.$notify({title:"用户添加取消",type:"info",message:t("b",{style:"color: teal"},v)})}))},next:function(){this.active++>2&&(this.active=0)},prev:function(){this.active--<0&&(this.active=0)},reset:function(){var e=this;Object.keys(this.rulesForm).forEach((function(t){e.rulesForm[t]=""}))}}},m=l,d=(r("ba67"),r("0c7c")),p=Object(d["a"])(m,s,a,!1,null,"446aadcf",null);t["default"]=p.exports},"9f42":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var s=r("9bd2");function a(e){return Object(s["a"])({url:"/site/list",method:"post",data:e})}},b12f4:function(e,t,r){},ba67:function(e,t,r){"use strict";var s=r("b12f4"),a=r.n(s);a.a},e0a5:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var s=r("9bd2");function a(e){return Object(s["a"])({url:"/register",method:"post",data:e})}},e25e:function(e,t,r){var s=r("23e7"),a=r("e583");s({global:!0,forced:parseInt!=a},{parseInt:a})},e583:function(e,t,r){var s=r("da84"),a=r("58a8").trim,o=r("5899"),i=s.parseInt,n=/^[+-]?0[Xx]/,u=8!==i(o+"08")||22!==i(o+"0x16");e.exports=u?function(e,t){var r=a(String(e));return i(r,t>>>0||(n.test(r)?16:10))}:i}}]);
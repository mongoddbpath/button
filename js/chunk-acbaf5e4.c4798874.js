(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-acbaf5e4"],{4921:function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("d2-container",{attrs:{type:"card"}},[t("el-row",{staticClass:"formv"},[t("el-col",{attrs:{span:e.spanok,offset:e.offsetok}},[t("el-form",{ref:"rulesForm",attrs:{model:e.rulesForm,rules:e.rules}},[t("el-form-item",{attrs:{prop:"username",required:""}},[t("div",{staticClass:"typename required"},[e._v("账户名：")]),t("el-input",{model:{value:e.rulesForm.username,callback:function(r){e.$set(e.rulesForm,"username",r)},expression:"rulesForm.username"}})],1),t("el-form-item",{attrs:{prop:"realName",required:""}},[t("div",{staticClass:"typename required"},[e._v("真实姓名：")]),t("el-input",{model:{value:e.rulesForm.realName,callback:function(r){e.$set(e.rulesForm,"realName",r)},expression:"rulesForm.realName"}})],1),t("el-form-item",{attrs:{prop:"tel",required:""}},[t("div",{staticClass:"typename required"},[e._v("手机号：")]),t("el-input",{model:{value:e.rulesForm.tel,callback:function(r){e.$set(e.rulesForm,"tel",r)},expression:"rulesForm.tel"}})],1),t("el-form-item",{attrs:{prop:"company",required:""}},[t("div",{staticClass:"typename required"},[e._v("公司名：")]),t("el-input",{model:{value:e.rulesForm.company,callback:function(r){e.$set(e.rulesForm,"company",r)},expression:"rulesForm.company"}})],1),t("el-form-item",{attrs:{prop:"password",required:""}},[t("div",{staticClass:"typename required"},[e._v("密码：")]),t("el-input",{attrs:{"show-password":""},model:{value:e.rulesForm.password,callback:function(r){e.$set(e.rulesForm,"password",r)},expression:"rulesForm.password"}})],1),t("el-form-item",{attrs:{prop:"cpassword",required:""}},[t("div",{staticClass:"typename required"},[e._v("密码确认：")]),t("el-input",{attrs:{"show-password":""},model:{value:e.rulesForm.cpassword,callback:function(r){e.$set(e.rulesForm,"cpassword",r)},expression:"rulesForm.cpassword"}})],1),t("el-form-item",{attrs:{prop:"domain",required:""}},[t("div",{staticClass:"typename required"},[e._v("域名：")]),t("el-input",{model:{value:e.rulesForm.domain,callback:function(r){e.$set(e.rulesForm,"domain",r)},expression:"rulesForm.domain"}})],1),t("el-form-item",{attrs:{prop:"level",required:""}},[t("div",{staticClass:"typename required"},[e._v("层级：")]),t("el-input",{model:{value:e.rulesForm.level,callback:function(r){e.$set(e.rulesForm,"level",e._n(r))},expression:"rulesForm.level"}})],1),t("el-form-item",{attrs:{prop:"logo"}},[t("div",{staticClass:"typename required"},[e._v("LOGO：")]),t("el-upload",{ref:"upload",attrs:{action:e.uploadAction,beforeUpload:e.beforeUploadPicture,"on-change":e.imageChange,"list-type":"picture-card",name:"logo",data:e.paramsData,limit:1,multiple:!1,"auto-upload":!1,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemovePicture,"on-error":e.createerror,"on-success":e.createSuccess}},[t("i",{staticClass:"el-icon-plus"})]),t("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(r){e.dialogVisible=r}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),t("el-form-item",[t("div",{staticClass:"buttonok2"},[t("el-button",{staticClass:"buttonok",attrs:{type:"primary"},on:{click:e.next1}},[e._v("确定")]),t("el-button",{staticClass:"buttonok",staticStyle:{"margin-right":"12px"},on:{click:e.reset}},[e._v("重置")])],1)])],1)],1)],1)],1)},s=[],o=(t("99af"),t("b64b"),t("e25e"),t("159b"),t("e0a5")),i=t("c276"),n={data:function(){var e=this,r=function(r,t,a){e.rulesForm.password!==e.rulesForm.cpassword?a(new Error("两个密码不一致，请修改")):a()},t=function(r,t,a){0===e.checkimg?a(new Error("请上传图片")):a()};return{uploadAction:"".concat("/","agent"),checkimg:0,dialogImageUrl:"",dialogVisible:!1,checkname:"",au:!1,sitearra:"",sitearr:[],checkid:2===parseInt(this.$util.cookies.get("uid")),active:0,userid:i["a"].cookies.get("uuid"),rules:{username:[{required:!0,message:"必填"},{min:3,max:28,message:"长度至少为3个字符",trigger:"blur"}],realName:[{required:!0,message:"必填"}],tel:[{required:!0,message:"请输入手机号"},{pattern:/^1[3|5|7|8|9]\d{9}$/,message:"请输入正确的号码格式",trigger:"blur"}],company:[{required:!0,message:"必填"}],password:[{required:!0,message:"必填"},{min:8,max:28,message:"长度至少为8个字符",trigger:"blur"}],cpassword:[{required:!0,message:"必填"},{min:8,max:28,message:"长度至少为8个字符",trigger:"blur"},{validator:r,trigger:"blur"}],domain:[{required:!0,message:"必填"},{pattern:/^(?=^.{3,255}$)[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+$/,message:"请输入正确的域名格式",trigger:"blur"}],level:[{required:!0,message:"必填"},{type:"number",min:1,trigger:"blur"}],logo:[{validator:t,trigger:"blur"}]},rulesForm:{group:2,username:"",realName:"",tel:"",password:"",cpassword:"",domain:"",level:2},pickerOptions1:{disabledDate:function(r){return r.getTime()>e.startTime||r.getTime()<Date.now()}}}},computed:{paramsData:function(){var e={domain:this.rulesForm.domain,level:this.rulesForm.level,companyName:this.rulesForm.company};return e},spanok:function(){return document.body.clientWidth>1500?8:10},offsetok:function(){return document.body.clientWidth>1500?8:7}},created:function(){this.$util.authen(["null",0,2])},mounted:function(){},methods:{createerror:function(){this.$notify({title:"代理创建失败",type:"error",duration:7e3})},createSuccess:function(e){var r=this,t="代理".concat(this.rulesForm.username,"【").concat(this.rulesForm.company,"】添加成功");this.$confirm(t,"代理添加成功",{confirmButtonText:"前往查看",cancelButtonText:"继续添加",showClose:!1,type:"success"}).then((function(){r.$router.push({name:"agent2"})})).catch((function(){r.reset()}))},beforeUploadPicture:function(e){var r="image/png"==e.type||"image/jpg"==e.type||"image/jpeg"==e.type,t=e.size<2097152;return r||this.$message.error("上传只能是jpg,jpeg,png格式"),t||this.$message.error("上传图片大小不能超过 2MB"),r&&t},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleRemovePicture:function(e,r){this.checkimg=r.length},imageChange:function(e,r,t){this.checkimg=r.length},next1:function(){var e=this;this.$refs.rulesForm.validate((function(r){r&&e.submitForm()}))},submitForm:function(){var e=this,r=this.$createElement,t=this.rulesForm,a=t.username,s=t.tel,i=t.company,n=t.password,l=t.realName,u=t.domain,c=t.level,m=["绑定域名：".concat(u),"代理层级：".concat(c),"公司名：".concat(i),"账户名：".concat(a),"真实姓名：".concat(l),"手机号：".concat(s),"密码：".concat(n)],d=[];for(var p in m)d.push(r("p",null,m[p]));var f=r("div",null,d),g="代理".concat(this.rulesForm.username,"添加取消");this.$confirm(f,"代理添加",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then((function(){var r=e;Object(o["a"])(e.rulesForm).then((function(t){r.paramsData.id=t,e.$refs.upload.submit()})).catch((function(){e.$notify({title:"代理添加失败",type:"error"})}))})).catch((function(){e.$notify({title:"代理添加取消",type:"info",message:r("b",{style:"color: teal"},g)})}))},reset:function(){var e=this;Object.keys(this.rulesForm).forEach((function(r){e.rulesForm[r]=""})),this.$refs.upload.clearFiles()}}},l=n,u=(t("5474"),t("0c7c")),c=Object(u["a"])(l,a,s,!1,null,"73076c7e",null);r["default"]=c.exports},5474:function(e,r,t){"use strict";var a=t("86e8"),s=t.n(a);s.a},"86e8":function(e,r,t){},e0a5:function(e,r,t){"use strict";t.d(r,"a",(function(){return s}));var a=t("9bd2");function s(e){return Object(a["a"])({url:"/register",method:"post",data:e})}},e25e:function(e,r,t){var a=t("23e7"),s=t("e583");a({global:!0,forced:parseInt!=s},{parseInt:s})},e583:function(e,r,t){var a=t("da84"),s=t("58a8").trim,o=t("5899"),i=a.parseInt,n=/^[+-]?0[Xx]/,l=8!==i(o+"08")||22!==i(o+"0x16");e.exports=l?function(e,r){var t=s(String(e));return i(t,r>>>0||(n.test(t)?16:10))}:i}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5911f613"],{"4f61":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("a9e3");function o(t){switch(Number(t)){case 0:t="管理员";break;case 1:t="客户";break;case 2:t="代理";break;case 3:t="客服";break}return t}},"50c6":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n("9bd2");function a(t){return Object(o["a"])({url:"/admin/disable",method:"get",params:t,withCredentials:!0})}},c790:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n("9bd2");function a(t){return Object(o["a"])({url:"/user/list?page=".concat(t),method:"get",withCredentials:!0})}},ed9d:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("d2-container",[n("template",{slot:"header"},[t._v("用户列表")]),n("d2-crud",{ref:"d2Crud",attrs:{pagination:t.pagination,columns:t.columns,data:t.data.filter((function(e){return!t.search||e.username.toLowerCase().includes(t.search.toLowerCase())})),rowHandle:t.rowHandle,"edit-title":"用户列表修改","edit-template":t.editTemplate,"form-options":t.formOptions},on:{"dialog-open":t.handleDialogOpen,"row-edit":t.handleRowEdit,"dialog-cancel":t.handleDialogCancel,"row-remove":t.handleRowRemove,"pagination-current-change":t.paginationCurrentChange}},[n("el-input",{staticStyle:{"margin-bottom":"6px"},attrs:{slot:"header",placeholder:"输入用户名搜索"},slot:"header",model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],2)},a=[],s=(n("a9e3"),n("c790")),r=n("fc60"),i={name:"webcontrol",components:{},data:function(){return{search:"",pagination:{currentPage:1,pageSize:15,total:0},columns:[{title:"用户名",key:"username"},{title:"真实姓名",key:"realName"},{title:"用户状态",key:"status",width:"100",component:{name:r["a"],props:{myProps:""}},filters:[{text:"启用",value:1},{text:"禁用",value:0}],filterMethod:function(t,e){return Number(e.status)===t},filterPlacement:"bottom-end"},{title:"用户电话",key:"tel"},{title:"所属组",key:"group",filters:[{text:"客户",value:"客户"},{text:"代理",value:"代理"},{text:"客服",value:"客服"}],filterMethod:function(t,e){return e.group===t},filterPlacement:"bottom-end"}],data:[],rowHandle:{columnHeader:"操作",width:"236",edit:[{icon:"el-icon-edit",text:"点我进行编辑",size:"small",show:function(t,e){return!!e.showEditButton},disabled:function(t,e){return!!e.forbidEdit}}],remove:[{icon:"el-icon-delete",size:"small",fixed:"right",confirm:!0,show:function(t,e){return!!e.showRemoveButton},disabled:function(t,e){return!!e.forbidRemove}}]},editTemplate:{group:{title:"所属组",value:"",component:{name:"el-select",options:[{value:"业务员"},{value:"建站"},{value:"客服"}]}},username:{title:"用户名",value:""},tel:{title:"手机号",value:""},forbidEdit:{title:"禁用按钮",value:!1,component:{show:!1}},showEditButton:{title:"显示按钮",value:!0,component:{show:!1}}},formOptions:{labelWidth:"100px",labelPosition:"left",saveLoading:!1}}},mounted:function(){this.fetchData(1)},methods:{handleDialogOpen:function(t){var e=t.mode;t.row;this.$message({message:"打开模态框，模式为："+e,type:"success"})},handleRowEdit:function(t,e){var n=this,o=(t.index,t.row);this.formOptions.saveLoading=!0,setTimeout((function(){n.$confirm("用户的信息正在被修改，请问您确定要这么做吗？","您正在修改用户",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t="用户".concat(o.username,"修改成功！");n.$alert(t,"用户修改",{dangerouslyUseHTMLString:!0,type:"success"}).catch(),e()})).catch((function(){n.$message({type:"success",message:"用户修改已取消"})})),n.formOptions.saveLoading=!1}),300)},handleDialogCancel:function(t){this.$message({message:"取消编辑",type:"warning"}),t()},handleRowRemove:function(t,e){var n=this,o=t.index,a=t.row;setTimeout((function(){console.log(o),console.log(a),n.$message({message:"删除成功",type:"error",duration:"5000"}),e()}),300)},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData(this.pagination.currentPage)},fetchData:function(t){var e=this;Object(s["a"])(t).then((function(t){for(var n=t.data,o=0;o<t.data.length;o++)null===n[o].group||0===n[o].group?(n[o].group="管理员",delete n[o]):1===n[o].group?n[o].group="客户":2===n[o].group?n[o].group="代理":3===n[o].group&&(n[o].group="客服");e.data=n,e.pagination.total=t.total,e.loading=!1,console.log(t)})).catch((function(t){console.log("err",t),e.loading=!1,e.$notify({message:"获取数据失败"})}))}}},c=i,u=n("0c7c"),l=Object(u["a"])(c,o,a,!1,null,null,null);e["default"]=l.exports},fc60:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{cursor:"pointer"}},[n("el-tag",{attrs:{type:t.type},nativeOn:{click:function(e){return t.handleClick(e)}}},[t._v(t._s(t.text))])],1)},a=[],s=(n("99af"),n("50c6")),r=n("4f61"),i=void 0,c={data:function(){return{value:!0,stdata:{id:this.scope.row.id}}},props:{scope:{default:null},myProps:{default:null}},computed:{type:function(){return this.scope.row.status?"success":"danger"},text:function(){return this.scope.row.status?"启用":"禁用"}},watch:{type:function(){return i.scope.row.status?"success":"danger"},text:function(){return i.scope.row.status?"启用":"禁用"}},mounted:function(){},methods:{handleClick:function(){var t=this,e=this.$createElement,n=this.type;if("success"===n){var o="你正在禁用【".concat(this.scope.row.username,"】【").concat(Object(r["a"])(this.scope.row.group),"】，禁用之后将无法登录，你确定要这么做吗？"),a="你已成功禁用【".concat(this.scope.row.username,"】【").concat(Object(r["a"])(this.scope.row.group),"】");this.$confirm(o,"禁用",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.stdata.status=0,Object(s["a"])(t.stdata).then((function(e){t.scope.row.status=0})).catch((function(e){console.log("err",e),t.loading=!1,t.$notify({message:"接口失败"})})),t.$notify({title:"禁用",duration:6e3,type:"error",message:e("b",{style:"color: teal"},a)}),t.scope.row.status=!t.scope.row.status})).catch((function(){}))}else{this.stdata.status=1,Object(s["a"])(this.stdata).then((function(e){t.scope.row.status=1})).catch((function(e){console.log("err",e),t.loading=!1,t.$notify({message:"接口失败"})}));var i="你已经启用【".concat(this.scope.row.username,"】【").concat(Object(r["a"])(this.scope.row.group),"】服务");this.$notify({title:"启用服务",duration:6e3,type:"success",message:e("b",{style:"color: teal"},i)}),this.scope.row.status=!this.scope.row.status}}}},u=c,l=n("0c7c"),d=Object(l["a"])(u,o,a,!1,null,null,null);e["a"]=d.exports}}]);
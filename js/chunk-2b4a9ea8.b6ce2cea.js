(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b4a9ea8"],{"09db":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r("9bd2");function n(e){return Object(a["a"])({url:"/admin/userAddSite",method:"post",data:e})}},"1cc5":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r("9bd2");function n(e){return Object(a["a"])({url:"/node/list",method:"get",params:e,withCredentials:!0})}},"42c9":function(e,t,r){"use strict";var a=r("a6d0"),n=r.n(a);n.a},"69a5":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r("9bd2");function n(e){return Object(a["a"])({url:"/site/list?page="+e,method:"post"})}},a6d0:function(e,t,r){},a8d6:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("d2-container",{attrs:{type:"card"}},[r("template",{slot:"header"},[e._v("网站生成"),r("br"),e._v(" 如果站点类型选择竞价站，将生成【ztb.net/网站名】网站，该类型网站一般用来做SEM百度竞价服务"),r("br"),e._v(" 如果站点类型选择企业站，将生成【域名】网站，等待解析绑定域名后该类型网站一般用来做SEO优化服务 ")]),r("div",{staticClass:"form-view"},[r("el-form",{ref:"rulesForm",attrs:{model:e.rulesForm,rules:e.rules}},[r("el-form-item",{attrs:{label:"站点类型",required:""}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"竞价站一般用来做竞价"},model:{value:e.rulesForm.appNameOK,callback:function(t){e.$set(e.rulesForm,"appNameOK",t)},expression:"rulesForm.appNameOK"}},e._l(e.appName1,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",{attrs:{label:"网站名(例子：www.abc.com)",prop:"name",required:""}},[r("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"企业站生成：域名;竞价站生成：ztb.net/网站名",placement:"bottom"}},[r("el-input",{attrs:{placeholder:"竞价站填写一串字符串;竞价站生成：ztb.net/网站名"},model:{value:e.rulesForm.name,callback:function(t){e.$set(e.rulesForm,"name",t)},expression:"rulesForm.name"}})],1)],1),r("el-form-item",{attrs:{label:"域名(例子：www.abc.com)",prop:"domain",required:""}},[r("el-input",{attrs:{placeholder:"企业站和上方的网站名保持一致"},model:{value:e.rulesForm.domain,callback:function(t){e.$set(e.rulesForm,"domain",t)},expression:"rulesForm.domain"}})],1),r("el-form-item",{attrs:{label:"是否生成Https(一般填否)",required:""}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择是否生成Https"},model:{value:e.ssl3,callback:function(t){e.ssl3=t},expression:"ssl3"}},e._l(e.ssl2,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",{attrs:{label:"选择部署服务器(只有竞价站部署本机服务器)",required:""}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"如果是外贸站请选择境外的服务器"},model:{value:e.serve,callback:function(t){e.serve=t},expression:"serve"}},e._l(e.serve1,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",{attrs:{label:"指派给站点用户",required:""}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"指派成功后该用户将获得网站的控制权"},model:{value:e.rulesForm.kf,callback:function(t){e.$set(e.rulesForm,"kf",t)},expression:"rulesForm.kf"}},e._l(e.kf1,(function(e,t){return r("el-option",{key:t,attrs:{label:e.username,value:e.username}})})),1)],1),r("el-form-item",{attrs:{label:"指派给建站",required:""}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择负责维护该网站的建站"},model:{value:e.rulesForm.jz,callback:function(t){e.$set(e.rulesForm,"jz",t)},expression:"rulesForm.jz"}},e._l(e.jz1,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",{attrs:{label:"站点用户名",prop:"username",required:""}},[r("el-input",{attrs:{placeholder:"一般地填写自己的名字"},model:{value:e.rulesForm.username,callback:function(t){e.$set(e.rulesForm,"username",t)},expression:"rulesForm.username"}})],1),r("el-form-item",{attrs:{label:"公司名",prop:"company"}},[r("el-input",{attrs:{placeholder:"请输入某某某公司"},model:{value:e.rulesForm.company,callback:function(t){e.$set(e.rulesForm,"company",t)},expression:"rulesForm.company"}})],1),r("el-form-item",{attrs:{label:"手机号",prop:"uphone"}},[r("el-input",{model:{value:e.rulesForm.uphone,callback:function(t){e.$set(e.rulesForm,"uphone",t)},expression:"rulesForm.uphone"}})],1),r("el-form-item",{attrs:{label:"QQ号",prop:"qq"}},[r("el-input",{model:{value:e.rulesForm.qq,callback:function(t){e.$set(e.rulesForm,"qq",t)},expression:"rulesForm.qq"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{model:{value:e.rulesForm.email,callback:function(t){e.$set(e.rulesForm,"email",t)},expression:"rulesForm.email"}})],1),r("el-form-item",{attrs:{label:"所在地",prop:"address"}},[r("el-input",{model:{value:e.rulesForm.address,callback:function(t){e.$set(e.rulesForm,"address",t)},expression:"rulesForm.address"}})],1),r("el-form-item",{attrs:{label:"业务员"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择业务员"},model:{value:e.rulesForm.ywy,callback:function(t){e.$set(e.rulesForm,"ywy",t)},expression:"rulesForm.ywy"}},e._l(e.ywy1,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",{attrs:{label:"套餐",required:""}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择套餐"},model:{value:e.rulesForm.plan,callback:function(t){e.$set(e.rulesForm,"plan",t)},expression:"rulesForm.plan"}},e._l(e.plan1,(function(e,t){return r("el-option",{key:t,attrs:{type:"String",label:e,value:e}})})),1)],1),r("el-form-item",{attrs:{label:"生成语种",prop:"lang"}},[r("el-checkbox-button",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v(" 全选 ")]),r("div",{staticStyle:{margin:"15px 0"}}),r("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.lang,callback:function(t){e.lang=t},expression:"lang"}},e._l(e.cities,(function(t){return r("el-checkbox-button",{key:t.id,attrs:{label:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),r("el-form-item",{attrs:{label:"合同时间",required:""}},[r("br"),r("el-row",[r("el-col",{attrs:{span:11}},[r("el-form-item",[r("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",placeholder:"合同开始日期"},model:{value:e.rulesForm.startTime,callback:function(t){e.$set(e.rulesForm,"startTime",t)},expression:"rulesForm.startTime"}})],1)],1),r("el-col",{attrs:{span:10}},[r("el-form-item",[r("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",placeholder:"合同结束日期","picker-options":e.pickerOptions1},model:{value:e.rulesForm.endTime,callback:function(t){e.$set(e.rulesForm,"endTime",t)},expression:"rulesForm.endTime"}})],1)],1)],1)],1),r("el-form-item",{attrs:{label:"需缴纳金",prop:"money"}},[r("el-input",{attrs:{placeholder:"请输入整数"},model:{value:e.rulesForm.money,callback:function(t){e.$set(e.rulesForm,"money",t)},expression:"rulesForm.money"}})],1),r("el-form-item",{attrs:{label:"已缴纳金",prop:"cmoney"}},[r("el-input",{attrs:{placeholder:"请输入整数"},model:{value:e.rulesForm.cmoney,callback:function(t){e.$set(e.rulesForm,"cmoney",t)},expression:"rulesForm.cmoney"}})],1),r("el-form-item",{attrs:{label:"关键词套餐",prop:"seoKeyWords"}},[r("el-input",{attrs:{type:"textarea",placeholder:"例子：seo,广州seo,广州网站建设"},model:{value:e.rulesForm.seoKeyWords,callback:function(t){e.$set(e.rulesForm,"seoKeyWords",t)},expression:"rulesForm.seoKeyWords"}})],1),r("el-form-item",{attrs:{label:"备注",prop:"note"}},[r("el-input",{attrs:{type:"textarea",placeholder:"如果是百度竞价站点请输入百度竞价站点名称简写"},model:{value:e.rulesForm.note,callback:function(t){e.$set(e.rulesForm,"note",t)},expression:"rulesForm.note"}})],1),r("el-form-item",[r("el-button",{on:{click:e.reset}},[e._v("重置")]),r("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即生成")])],1)],1)],1)],2)},n=[],l=(r("99af"),r("4de4"),r("baa5"),r("d81d"),r("b0c0"),r("b64b"),r("159b"),r("cc05")),o=r("c790"),s=r("69a5"),i=r("09db"),c=r("c276"),u=r("1cc5"),m={data:function(){var e=this;return{ssl1:[0,1],ssl2:["不启用Https","启用https，系统自动生成证书并且维护"],ssl3:"",serve1:["本机部署(备案的)","香港服务器部署(未备案的)"],serve:"",hostId1:["","iZj6c4rfm2unheu6nofgkaZ"],userarr:"",websiteid:"",userid:c["a"].cookies.get("uuid"),rules:{name:[{required:!0,message:"必填"},{min:4,message:"长度至少为4个字符",trigger:"blur"}],username:[{required:!0,message:"必填"},{min:1,max:12,message:"长度至少为1到12个字符",trigger:"blur"}],plan:[{required:!0,message:"必选"}],startTime:[{required:!0,message:"必选"}],endTime:[{required:!0,message:"必选"}]},checkAll:!1,CName:[],lang:[],webCreateName:"",cities:[{id:"zh",name:"中文",lang:"zh"},{id:"en",name:"英语",lang:"en"},{id:"ja",name:"日语",lang:"ja"},{id:"de",name:"德语",lang:"de"},{id:"fr",name:"法语",lang:"fr"},{id:"fa",name:"波斯语",lang:"fa"},{id:"ms",name:"马来西亚语",lang:"ms"},{id:"ru",name:"俄语",lang:"ru"},{id:"th",name:"泰语",lang:"th"},{id:"vi",name:"越南语",lang:"vi"},{id:"ko",name:"朝鲜语",lang:"ko"},{id:"da",name:"丹麦语",lang:"da"},{id:"cdo",name:"闽东语",lang:"cdo"},{id:"id",name:"印尼语",lang:"id"},{id:"pt",name:"葡萄牙语",lang:"pt"},{id:"uk",name:"乌克兰语",lang:"uk"}],isIndeterminate:!0,plan1:["外语套餐","A套餐","B套餐","C套餐","D套餐","单词套餐"],ywy1:["钟总","杨总","陈总"],kf1:["小贤","海华","丽欣"],jz1:["小梅","小安"],appName1:["竞价站","企业站"],pic:"http://www.chuangli.net/style/img/logo.jpg",mburl:"http://www.chuangli.net/",rulesForm:{hostId:"",username:"",ssl:0,company:"",uphone:"",qq:"",email:"",address:"",name:"",domain:"",startTime:"",endTime:"",delivery:!1,note:"",plan:"",ywy:"",kf:"",jz:"",money:"",cmoney:"",appNameOK:"",styleId:"styleId",seoKeyWords:""},pickerOptions1:{disabledDate:function(t){return t.getTime()>e.startTime||t.getTime()<Date.now()}}}},mounted:function(){var e=this;this.$util.authen(["null",0,2]),Object(o["a"])().then((function(t){e.userarr=t.data;var r=t.data.filter((function(e){var t=e.group;return 1===t}));e.kf1=r})).catch(),Object(u["a"])().then((function(t){for(var r=t.data,a=["120.24.23.89(本机服务器)"],n=[""],l=0;l<r.length;l++)a.push(r[l].ip+"(".concat(r[l].region,")"));for(var o=0;o<r.length;o++)n.push(r[o].hostId);e.serve1=a,e.hostId1=n})).catch((function(t){console.log("err",t),e.loading=!1,e.$notify({message:"获取数据失败"})}))},methods:{handleCheckAllChange:function(e){var t=this.cities.map((function(e){return e.id}));this.lang=e?t:[];var r=this.cities.map((function(e){return e.name}));this.CName=e?r:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(e){var t=e.length;this.checkAll=t===this.cities.length,this.isIndeterminate=t>0&&t<this.cities.length},onSubmit:function(){var e=this,t=this.$createElement;this.$refs.rulesForm.validate((function(r){if(!r)return e.$notify({title:"请核对表单信息",type:"error",duration:6e3,message:t("b",{style:"color: #fc2828"},"表单数据不完整或者格式有误")}),!1;if(!1===e.checkAll){e.CName=[];for(var a=0;a<e.cities.length;a++)for(var n=0;n<e.lang.length;n++)e.lang[n]===e.cities[a].id&&e.CName.push(e.cities[a].name)}for(var o=0;o<e.ssl1.length;o++)e.ssl3===e.ssl2[o]&&(e.rulesForm.ssl=e.ssl1[o]);var c=e.rulesForm,u=c.appNameOK,m=c.username,d=c.company,p=c.kf,f=c.jz,h=c.money,b=c.cmoney,y=c.uphone,g=c.plan,v=c.qq,F=c.email,k=c.address,w=c.ywy,x=c.name,$=c.domain,O=c.startTime,C=c.endTime,N=c.note;e.rulesForm.lang=String(e.CName);var q=["网站参数确认：","绑定的域名：".concat($),"服务器选择：".concat(e.serve),"站点类型：".concat(u),"Https：".concat(e.ssl3),"客户名：".concat(m),"公司名：".concat(d),"客户手机号：".concat(y),"客户QQ：".concat(v),"客户的邮箱：".concat(F),"客户所在地：".concat(k),"业务员：".concat(w),"指派给建站：".concat(f),"指派给站点用户：".concat(p),"网站套餐：".concat(g),"要生成的语种：".concat(e.CName),"合同时间：【".concat(O,"】 - 【").concat(C,"】"),"需缴纳金：".concat(h),"已缴纳金：".concat(b),"关键词套餐：".concat(e.rulesForm.seoKeyWords),"备注：".concat(N)],j=[];for(var S in q)j.push(t("p",null,q[S]));var T=t("div",null,j);"企业站"===e.rulesForm.appNameOK?(e.webCreateName="将生成【".concat($,"】企业站点网站，请核对"),e.webCreateNameOK="【".concat($,"】")):(e.webCreateName="将生成【ztb.net/".concat(x,"】竞价站点网站，请核对"),e.webCreateNameOK="【ztb.net/".concat(x,"】"));var z="".concat(e.webCreateNameOK,"网站生成失败"),I="".concat(e.webCreateNameOK,"网站生成成功，可请前往站点管理页面来登录后台,\n          如果建站有任何问题可通过QQ与建站与客服沟通");e.$confirm(T,e.webCreateName,{dangerouslyUseHTMLString:!1,confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then((function(){var r=e;null==r.rulesForm.appNameOK?e.$notify({title:"请选择你的站点类型",type:"error",message:t("i",{style:"color: teal"},z)}):"企业站"===e.rulesForm.appNameOK?r.rulesForm.appName="site":"竞价站"===e.rulesForm.appNameOK&&(r.rulesForm.appName="dirSite");for(var a=0;a<r.serve1.length;a++)r.serve===r.serve1[a]&&(r.rulesForm.hostId=r.hostId1[a]);""!==r.rulesForm.hostId&&"dirSite"===r.rulesForm.appName?e.$notify({message:"香港服务器选择不可以使用竞价站"}):Object(l["a"])(r.rulesForm).then((function(){Object(s["a"])(1).then((function(t){var a=t.data.filter((function(e){var t=e.name;return t===r.rulesForm.name})),n={};n.siteid=a[0].id,r.websiteid=n.siteid,n.userid=r.userid,Object(i["a"])(n).then((function(t){var a={};a.u=r.kf1.filter((function(e){var t=e.username;return t===r.rulesForm.kf})),a.userid=a.u[0].id,a.siteid=r.websiteid,Object(i["a"])(a).then((function(t){e.$notify({message:"同时站点管理权已经被添加"})}))}))})).catch((function(t){console.log("err",t),e.loading=!1,e.$notify({message:"获取数据失败"})})),e.$confirm(I,"网站生成成功",{confirmButtonText:"确定",cancelButtonText:"前往查看",showClose:!1,type:"success"}).then((function(){})).catch((function(){e.$router.push({name:"webcontrol"})}))})).catch((function(){e.$notify({title:"网站生成失败",type:"error",message:t("b",{style:"color: teal"},z)})}))})).catch((function(){e.$notify({title:"网站生成取消",type:"info",message:t("b",{style:"color: teal"},"网站生成已取消")})}))}))},reset:function(){var e=this;Object.keys(this.rulesForm).forEach((function(t){e.rulesForm[t]=""}))},See:function(e){window.open(e)},beforeUpload:function(e){console.log(e);var t=e.name.substring(e.name.lastIndexOf(".")+1),r="zip"===t,a="gz"===t,n=e.size/1024/1024<200;r||a||this.$message({message:"上传文件只能是 zip、gz格式!",type:"warning"}),n||this.$message({message:"上传文件大小不能超过 200MB!",type:"warning"})},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},handleAvatarError:function(e,t){this.$notify({message:"上传失败"})},handleAvatarSuccess:function(e,t){this.$notify({title:"文件\n        ".concat(t.name,"上传成功")})}}},d=m,p=(r("42c9"),r("0c7c")),f=Object(p["a"])(d,a,n,!1,null,"65483650",null);t["default"]=f.exports},baa5:function(e,t,r){var a=r("23e7"),n=r("e58c");a({target:"Array",proto:!0,forced:n!==[].lastIndexOf},{lastIndexOf:n})},c790:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r("9bd2");function n(e){return Object(a["a"])({url:"/user/list?page=".concat(e),method:"get",withCredentials:!0})}},cc05:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r("9bd2");function n(e){return Object(a["a"])({url:"/site/create",method:"post",data:e})}},e58c:function(e,t,r){"use strict";var a=r("fc6a"),n=r("a691"),l=r("50c4"),o=r("b301"),s=Math.min,i=[].lastIndexOf,c=!!i&&1/[1].lastIndexOf(1,-0)<0,u=o("lastIndexOf");e.exports=c||u?function(e){if(c)return i.apply(this,arguments)||0;var t=a(this),r=l(t.length),o=r-1;for(arguments.length>1&&(o=s(o,n(arguments[1]))),o<0&&(o=r+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:i}}]);